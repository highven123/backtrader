# 多市场策略回测系统

一个基于 Streamlit 和 Backtrader 的多市场策略回测系统，支持股票和加密货币市场。

## 功能特点

- 支持多个数据源：yfinance、akshare、baostock、ccxt
- 支持多个市场：A股、港股、美股、加密货币
- 内置多个策略：
  - 双均线策略
  - RSI策略
  - MACD策略
  - 趋势跟随策略
  - 供给需求策略
  - 丁格尔策略
  - 评分制信号策略
- 支持多种止损方式：ATR、百分比、波动、追踪
- 完整的回测报告：
  - KPI指标（收益率、夏普比率、最大回撤等）
  - 交互式权益曲线
  - 交易记录和日志
  - 回测历史记录

## 安装

1. 克隆仓库：
```bash
git clone https://github.com/yourusername/trading_backtest_app.git
cd trading_backtest_app
```

2. 安装依赖：
```bash
pip install -r requirements.txt
```

## 使用方法

1. 启动应用：
```bash
streamlit run app.py
```

2. 在浏览器中打开显示的地址（通常是 http://localhost:8501）

3. 在侧边栏中：
   - 选择数据源
   - 输入标的代码
   - 选择回测时间范围
   - 选择策略
   - 调整策略参数
   - 点击"执行回测"按钮

## 数据源说明

- yfinance：支持美股、港股等国际市场
- akshare：支持A股、港股、美股等
- baostock：支持A股
- ccxt：支持加密货币

## 策略说明

1. 双均线策略：
   - 使用短期和长期移动平均线的交叉信号
   - 可调整均线周期和仓位大小

2. RSI策略：
   - 使用RSI指标的超买超卖信号
   - 可调整RSI周期、阈值和仓位大小

3. MACD策略：
   - 使用MACD指标的金叉死叉信号
   - 可调整快线、慢线、信号线周期和仓位大小

4. 趋势跟随策略：
   - 使用ATR和趋势线
   - 可调整ATR周期、乘数、趋势周期和仓位大小

5. 供给需求策略：
   - 使用成交量和价格突破识别供给区和需求区
   - 可调整回看周期、阈值和仓位大小

6. 丁格尔策略：
   - 使用成交量和价格波动识别市场结构
   - 可调整回看周期、阈值和仓位大小

7. 评分制信号策略：
   - 综合多个因子（成交量、价格、波动率等）进行评分
   - 可调整各因子权重、阈值和仓位大小

## 注意事项

1. 确保网络连接正常，特别是使用yfinance和ccxt时
2. 对于A股数据，建议使用akshare或baostock
3. 加密货币数据使用ccxt，需要确保交易所API可用
4. 回测结果仅供参考，实际交易需要考虑更多因素

## 后续计划

- [ ] 添加更多策略
- [ ] 支持多策略组合
- [ ] 添加参数优化功能
- [ ] 支持实时交易
- [ ] 添加更多技术指标
- [ ] 支持自定义策略

## 贡献

欢迎提交 Issue 和 Pull Request！

## 许可证

MIT License 